"use strict";angular.module("mytreeherderApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angularSpinner"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]).value("APP_SETTINGS",{serviceUrl:"https://treeherder.mozilla.org"}),angular.module("mytreeherderApp").controller("MainCtrl",["$scope","$interpolate","$http","APP_SETTINGS","usSpinnerService",function(a,b,c,d,e){var f=d.serviceUrl+"/api/repository/";a.repo_options=[],a.repository="",a.email="",a.message="",c.get(f).then(function(b){a.repo_options.push.apply(a.repo_options,b.data)});var g=b(d.serviceUrl+"/api/project/{{repository}}/resultset/?author={{author}}");a.find_pushes=function(){a.resultset_list=[];var b=g({repository:a.repository.name,author:a.email});e.spin("main_spinner"),a.message="",c.get(b).then(function(b){var c=[];0==b.data.results.length?a.message="No result sets found :(":angular.forEach(b.data.results,function(a){var b=0;angular.forEach(a.job_counts,function(a){b+=a});var d=a.job_counts.pending+a.job_counts.running;c.push({revision:a.revisions[0].revision,push_timestamp:new Date(1e3*a.push_timestamp),status:Math.round(100*(b-d)/b)})}),a.resultset_list=c},function(b){a.message="Error retrieving data from the server:"+JSON.stringify(b)}).finally(function(){e.stop("main_spinner")})}}]);